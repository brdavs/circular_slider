function slider(d,e){var r,t;function v(a,c,b){var f=Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2));c=Math.sqrt(Math.pow(c.x-b.x,2)+Math.pow(c.y-b.y,2));var n=Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)),f=180*Math.acos((c*c+f*f-n*n)/(2*c*f))/Math.PI;return a.x<b.x?f:180-f+180}function p(a,c,b,f){f=(f-90)*Math.PI/180;return{x:a+b*Math.cos(f),y:c+b*Math.sin(f)}}function w(a,c,b,f,n){var g=p(a,c,b,n);a=p(a,c,b,f);return["M",g.x,g.y,"A",b,b,0,180>=n+f?0:1,1,a.x,a.y].join(" ")}function q(a){a=
a.getBoundingClientRect();return{x:a.width/2+a.left,y:a.height/2+a.top}}function z(a){for(var c=[a.bg_gap_color,a.bg_color,a.gap_color,a.color],b=0;b<c.length;b++){var f={el:"path",attr:{fill:"none",stroke:c[b],"class":2>b?"circle circle_"+b:"arc arc_"+b,"stroke-width":a.width,"stroke-dasharray":1==Math.abs(b%2)?[a.dash,a.gap]:"",d:w(l/2,l/2,a.size/2-a.width/2-2,2>b?359.9:.1,0)}};c[b]=f}b=ce({el:"circle",attr:{"class":"handle",cx:l/2,cy:l/2,r:a.width/2+2,transform:"translate(0 0)",fill:"#fff",stroke:"#000",
"stroke-width":1}});f=p(a.size/2,a.size/2,a.size/2,0);b.transform.baseVal.getItem(0).setTranslate(f.y,-(f.x-a.width/2-2));c=ce({el:"g",content:c.concat(b)});c.slider_data={data:a};x(c);return c}function x(a){var c=a.slider_data,b=a.slider_data.data;["name","angle","value","color"].forEach(function(a){for(var f=[d,b["class"],a].join("-"),f=document.getElementsByClassName(f),g=0;g<f.length;g++)"name"==a&&(f[g].textContent=b.name),"angle"==a&&(f[g].textContent=c[a]?c[a].toFixed(2):(0).toFixed(2)),"value"==
a&&(f[g].textContent=c[a]?c[a].toFixed(2):b.min_value.toFixed(2)),"color"==a&&(f[g].style.backgroundColor=b[a])});console.log(a.slider_data)}function y(a,c){"touchmove"==a.type?(r=a.touches[0].clientX,t=a.touches[0].clientY):(r=a.clientX,t=a.clientY);m=c?[c]:m;m.forEach(function(b){if(b.slider_data.rotating||-1!=["mousedown","touchmove"].indexOf(a.type)){var c=b.getElementsByClassName("handle")[0];b.slider_data.m={x:r,y:t};var e=b.slider_data,g=b.slider_data.data,e=b.slider_data.angle=v(e.a,e.c,e.m);
var d=g.step;0!=d&&(d=360/((g.max_value-g.min_value)/d),e=d*Math.round(e/d));d=b.slider_data.handle_pos=p(g.size,g.size,g.size/2-g.width/2-2,e);b.slider_data.value=1/360*(g.max_value-g.min_value)*e+g.min_value;c.transform.baseVal.getItem(0).setTranslate(d.x-g.size,d.y-g.size);c=b.getElementsByClassName("arc");for(d=0;d<c.length;d++)arc_data=w(l/2,l/2,g.size/2-g.width/2-2,360==e?e-.1:e,0),c[d].setAttribute("d",arc_data);x(b)}})}var u={name:"Transportation",size:100,width:10,dash:6,gap:2,rotate:0,min_value:100,
max_value:200,step:0,gap_color:"#977fa1",color:"#5f3b6f",bg_gap_color:"#d7d7d7",bg_color:"#c8c8c8"};e=e.map(function(a){for(k in u)u.hasOwnProperty(k)&&!a.hasOwnProperty(k)&&(a[k]=u[k]);return a});e=e.sort(function(a,c){return a.size<c.size?1:-1});var l=e[0].size,m=this.sliders=[];t=r=0;e.forEach(function(a){a["class"]=a.name.toLowerCase().replace(" ","_");m.push(z(a))});var A=this.svg=ce({el:"svg",attr:{width:e[0].size,height:e[0].size,viewbox:"0 0 "+[e[0].size,e[0].size].join(" ")},content:this.sliders}),
h=document.getElementById(d);h.appendChild(A);h.style.width=e[0].size+"px";h.style.height=h.style.width;this.sliders=this.sliders.map(function(a){var c=a.getElementsByClassName("handle")[0],b=a.slider_data;b.rotating=!1;b.halt="";b.c=q(h);b.a=q(c);b.m=q(c);b.angle=v(b.a,b.c,b.m);b.handle_pos=p(b.data.size,b.data.size,b.data.size/2-b.data.width/2-2,b.angle);a.slider_data=b;["mousedown","touchstart"].forEach(function(b){c.addEventListener(b,function(b){a.slider_data.c=q(h);a.slider_data.rotating=!0})});
a.addEventListener("mousedown",function(b){a.slider_data.c=q(h);y(b,a)},!1);return a});document.addEventListener("mouseup",function(a){m=m.map(function(a){a.slider_data.rotating=!1;return a})},!1);["mousemove","touchmove"].forEach(function(){document.addEventListener("mousemove",y)})}
function ce(d){var e=document.createElement(d.el),e="div"!=d.el?document.createElementNS("http://www.w3.org/2000/svg",d.el):e;for(k in d.attr)d.attr.hasOwnProperty(k)&&e.setAttribute(k,d.attr[k]);if(!d.content)return e;d.content.constructor!==Array&&(d.content=[d.content]);d.content.forEach(function(d){n_item="string"===typeof d?document.createTextNode(d):d.attributes?d:ce(d);e.appendChild(n_item)});return e};